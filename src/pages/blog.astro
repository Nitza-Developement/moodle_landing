---
// src/pages/index.astro  (o donde tengas tu página principal)
import Layout from "../layouts/Layout.astro";
import LatestArticle from "@components/ui/LatestArticle.astro";
import BlogHero from "../components/BlogHero.astro";
import es from "../i18n/locales/es.json";

// Obtener todos los posts (ajusta según tu estructura de contenido)
import { getCollection } from "astro:content";
const allPosts = await getCollection("blog");
const { blog } = es;

// Ordenar por fecha descendente
const latestPosts = allPosts
    .sort(
        (a, b) =>
            new Date(b.data.pubDate).getTime() -
            new Date(a.data.pubDate).getTime(),
    )
    .slice(0, 10); // Muestra los 10 más recientes, ajusta según necesites

const title = "The Astro Blog";
const description =
    "Noticias, consejos y guías sobre astronomía, espacio y ciencia.";
---

<Layout title={title} description={description}>
    <BlogHero {...blog.hero} />

    <!-- Latest Articles -->
    <section class="py-16 bg-bg-light dark:bg-dark-bg-primary">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-between items-center mb-10">
                <h2 class="text-4xl font-bold dark:text-dark-text-primary">
                    Últimos artículos
                </h2>
                <a
                    href="/blog"
                    class="text-primary hover:text-primary-dark transition-colors text-lg dark:text-primary-light dark:hover:text-primary"
                >
                    Ver todos →
                </a>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {
                    latestPosts.map((post) => (
                        <LatestArticle
                            image={
                                (typeof post.data.heroImage === "string"
                                    ? post.data.heroImage
                                    : post.data.heroImage?.src) || ""
                            }
                            imageAlt={post.data.title}
                            category={post.data.category}
                            categoryUrl={`/blog/categoria/${post.data.categorySlug}`}
                            title={post.data.title}
                            url={`/blog/${post.id}`}
                            description={post.data.description}
                            pubDate={post.data.pubDate}
                            readingTime={post.data.readingTime}
                        />
                    ))
                }
            </div>
        </div>
    </section>

    <!-- Opcional: Otras secciones inspiradas (ej. Guías populares, Categorías destacadas) -->
    <!-- Puedes agregar más secciones similares si tu blog tiene contenido categorizado -->
    <!-- Ejemplo de categorías destacadas -->
    <section class="py-16">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold mb-10 text-center">
                Categorías populares
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <a
                    href="/categoria/observacion"
                    class="text-center p-8 bg-gray-200 dark:bg-gray-800 rounded-lg hover:bg-cyan-100 dark:hover:bg-cyan-900 transition"
                >
                    <h3 class="text-2xl font-bold">Observación</h3>
                </a>
                <a
                    href="/categoria/astrofotografia"
                    class="text-center p-8 bg-gray-200 dark:bg-gray-800 rounded-lg hover:bg-cyan-100 dark:hover:bg-cyan-900 transition"
                >
                    <h3 class="text-2xl font-bold">Astrofotografía</h3>
                </a>
                <a
                    href="/categoria/misiones-espaciales"
                    class="text-center p-8 bg-gray-200 dark:bg-gray-800 rounded-lg hover:bg-cyan-100 dark:hover:bg-cyan-900 transition"
                >
                    <h3 class="text-2xl font-bold">Misiones espaciales</h3>
                </a>
                <a
                    href="/categoria/ciencia"
                    class="text-center p-8 bg-gray-200 dark:bg-gray-800 rounded-lg hover:bg-cyan-100 dark:hover:bg-cyan-900 transition"
                >
                    <h3 class="text-2xl font-bold">Ciencia del espacio</h3>
                </a>
            </div>
        </div>
    </section>
</Layout>
